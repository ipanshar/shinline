var h=Object.defineProperty;var o=(r,n,a)=>n in r?h(r,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[n]=a;var d=(r,n,a)=>o(r,typeof n!="symbol"?n+"":n,a);import{R as m,a as x,j as e,L as j}from"./app-CWw3lnKq.js";import{A as u}from"./app-layout-DmcVpiF6.js";import{B as i}from"./button-DbZ-m-Te.js";import"./index-BaSfRIGE.js";import"./index-CV8dIoGT.js";import"./shin-line-logo-DeoKgELm.js";class p extends m.Component{constructor(a){super(a);d(this,"Gettasks",a=>{x.post("/task/gettasks",{page:a}).then(s=>{this.state.view_app.length=0,this.state.paginate.length=0;const l=[];if(s.data.current_page>0){const t=Number(s.data.current_page),c=Number(s.data.last_page);this.state.paginate.length===0&&(l.push(e.jsx(i,{className:"paginateButton ms-1",size:"sm",onClick:()=>this.Gettasks(1),children:"«"},t*20)),t-2>0&&l.push(e.jsx(i,{className:"paginateButton ms-1",size:"sm",onClick:()=>this.Gettasks(t-2),children:t-2},t-2)),t-1>0&&l.push(e.jsx(i,{className:"paginateButton ms-1",size:"sm",onClick:()=>this.Gettasks(t-1),children:t-1},t-1)),l.push(e.jsx(i,{disabled:!0,size:"sm",className:"paginateButton ms-1",children:t},t)),t+1<=c&&l.push(e.jsx(i,{className:"paginateButton ms-1",size:"sm",onClick:()=>this.Gettasks(t+1),children:t+1},t+1)),t+2<=c&&l.push(e.jsx(i,{className:"paginateButton ms-1",size:"sm",onClick:()=>this.Gettasks(t+2),children:t+2},t+2)),l.push(e.jsx(i,{className:"paginateButton ms-1",size:"sm",onClick:()=>this.Gettasks(c),children:"»"},t*10)))}this.setState({paginate:l}),this.setState({tasks:s.data.data,main_cont:!1},()=>{this.view_app()})}).catch(s=>{console.error("Ошибка при получении задания:",s)})});d(this,"view_app",()=>{if(this.state.tasks.length>0){const a=this.state.tasks.map((s,l)=>e.jsx("div",{className:"border border-dark rounded m-1 p-2 bg-white shadow-md",children:e.jsxs("table",{className:"table table-bordered table-striped table-hover w-full",children:[e.jsx("thead",{className:"bg-red-500 text-white w-full",children:e.jsxs("tr",{children:[e.jsxs("th",{className:"w-1/3 d-flex justify-content-start",children:["ID: ",s.id]}),e.jsxs("th",{className:"w-1/3",children:["Рейс: ",s.name]}),e.jsxs("th",{className:"w-1/3",children:["Статус: ",s.status_name]})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"d-flex justify-content-start",children:e.jsxs("small",{children:["План: ",s.plan_date]})}),e.jsx("td",{className:"d-flex justify-content-start",children:e.jsxs("small",{children:["Прибытие: ",s.begin_date]})}),e.jsx("td",{className:"d-flex justify-content-start",children:e.jsxs("small",{children:["Убытие: ",s.end_date]})})]}),e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"d-flex justify-content-start",children:e.jsx("small",{children:s.description})})}),e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"d-flex justify-content-start",children:e.jsx("small",{children:s.yard_name})})}),e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"d-flex justify-content-start",children:e.jsxs("small",{children:["Кординатор:",s.avtor,";",s.phone?" тел: "+s.phone:""]})})}),e.jsx("tr",{children:e.jsx("td",{colSpan:3,children:e.jsx("span",{className:"d-flex justify-content-start",children:e.jsxs("small",{children:[" ",s.company?"Компания: "+s.company+"; ":""," Номер ТС: ",e.jsx("b",{children:s.truck_plate_number}),";",s.trailer_plate_number?"Номер прицепа: "+s.trailer_plate_number+"; ":"",s.truck_model?"Модель ТС: "+s.truck_model+"; ":"",s.truck_category_name?"Категория ТС: "+s.truck_category_name+"; ":"",s.trailer_type_name?"Тип прицепа: "+s.trailer_type_name+"; ":"",s.truck_model_name?"Модель прицепа: "+s.truck_model_name+"; ":"",s.color?"Цвет: "+s.color+";":""]})})})}),e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"d-flex justify-content-start",children:e.jsxs("small",{children:["Водитель: ",s.user_name,"; login: ",s.user_login,"; тел: ",s.user_phone,";"]})})}),e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"text-center",children:e.jsx("small",{children:e.jsx("b",{children:"Задачи"})})})}),s.task_weighings.length>0?e.jsxs("tr",{className:"d-flex justify-content-start border-t-2 border-b-gray-300  bg-green-200",children:[e.jsx("td",{className:"d-flex justify-content-start",children:e.jsx("small",{children:s.task_weighings[0].statuse_weighing_name})}),e.jsx("td",{className:"d-flex justify-content-start",children:e.jsxs("small",{children:["вес: ",e.jsx("b",{children:s.task_weighings[0].weight})]})}),e.jsx("td",{className:"d-flex justify-content-start",children:e.jsx("small",{children:s.task_weighings[0].weight?s.task_weighings[0].updated_at:""})})]}):"",s.task_loadings.length>0?s.task_loadings.map((t,c)=>e.jsxs("tr",{className:"d-flex justify-content-start border-t-2 border-b-gray-300  bg-yellow-200",children:[e.jsx("td",{className:"d-flex justify-content-start",children:e.jsx("small",{children:t.warehouse_name})}),e.jsx("td",{className:"d-flex justify-content-start",children:e.jsxs("small",{children:["Ворота план: ",e.jsx("b",{children:t.warehouse_gate_plan_name})]})}),e.jsx("td",{className:"d-flex justify-content-start",children:e.jsxs("small",{children:["Ворота факт: ",e.jsx("b",{children:t.warehouse_gate_fact_name})]})})]},c)):"",s.task_weighings.length>0?e.jsxs("tr",{className:"d-flex justify-content-start border-t-2 border-b-gray-300 bg-green-200",children:[e.jsx("td",{className:"d-flex justify-content-start",children:e.jsx("small",{children:s.task_weighings[1].statuse_weighing_name})}),e.jsx("td",{className:"d-flex justify-content-start",children:e.jsxs("small",{children:["вес: ",e.jsx("b",{children:s.task_weighings[1].weight})]})}),e.jsx("td",{className:"d-flex justify-content-start",children:e.jsx("small",{children:s.task_weighings[1].weight?s.task_weighings[1].updated_at:""})})]}):""]}),e.jsx("tfoot",{className:"bg-red-500 text-white w-full"})]})},l));this.setState({view_app:a})}});this.state={tasks:[],paginate:[],view_app:[],main_cont:!0,selectedTask:null,showModal:!1,isEditMode:!1,newTaskName:"",newTaskDescription:"",newTaskStatus:"",newTaskPriority:"",newTaskAssignee:"",newTaskDueDate:""}}componentDidMount(){this.Gettasks(1)}render(){return e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4",children:[e.jsx("div",{className:"grid auto-rows-min gap-4 md:grid-cols-3",children:this.state.view_app.map((a,s)=>a)}),e.jsxs("div",{className:"sticky bottom-0 w-full flex justify-center p-4 rounded-xl shadow-md",children:[" ",this.state.paginate.map((a,s)=>a)]},"pagination")]})}}const g=[{title:"Задания",href:"/tasks"}];function S(){return e.jsxs(u,{breadcrumbs:g,children:[e.jsx(j,{title:"Задания"}),e.jsx(p,{})]})}export{S as default};
