import{j as e,r as o,a as g,L as v}from"./app-C2sKqGuk.js";import{P as c}from"./index-DbH_zRjn.js";import{B as d}from"./button-CiXunvm5.js";import{A as y}from"./app-layout-B9z0nEEC.js";import"./index-DY5GBYP5.js";import"./index-Cy5X9-6g.js";import"./shin-line-logo-DeoKgELm.js";import"./useTranslation-sWXn4umK.js";const l=({label:s,value:n})=>e.jsxs("div",{style:{marginBottom:8},children:[e.jsxs("strong",{children:[s,":"]})," ",n||"—"]});l.propTypes={label:c.string.isRequired,value:c.any};const u=({truck:s})=>e.jsxs("div",{style:{border:"1px solid #e0e0e0",borderRadius:"10px",padding:"20px",margin:"16px 0",background:"#fafbfc",boxShadow:"0 2px 8px rgba(0,0,0,0.05)",maxWidth:400},children:[e.jsx("h2",{style:{margin:"0 0 12px 0",color:"#2d3a4b"},children:s.truck_model_name||"Без модели"}),e.jsx(l,{label:"Гос. номер",value:s.plate_number}),e.jsx(l,{label:"Владелец",value:s.truck_own?"Собственный":"Чужой"}),e.jsx(l,{label:"Марка",value:s.truck_brand_name}),e.jsx(l,{label:"Категория",value:s.truck_categories_name}),e.jsx(l,{label:"Цвет",value:s.color}),e.jsx(l,{label:"VIN",value:s.vin}),e.jsx(l,{label:"Прицеп",value:s.trailer_model_name}),e.jsx(l,{label:"Тип прицепа",value:s.trailer_type_name}),e.jsxs("div",{style:{fontSize:12,color:"#888"},children:["Добавлен: ",new Date(s.created_at).toLocaleDateString()]})]});u.propTypes={truck:c.object.isRequired};const _=({currentPage:s,lastPage:n,setPage:i})=>{const r=[];r.push(e.jsx(d,{className:"px-3 py-2 mx-1 rounded bg-red-500 text-white hover:bg-red-600 font-bold",onClick:()=>i(1),children:"|<"},"first"));for(let t=Math.max(1,s-3);t<s;t++)r.push(e.jsx(d,{className:"px-3 py-2 mx-1 rounded bg-red-500 text-white hover:bg-red-700",onClick:()=>i(t),children:t},t));r.push(e.jsx(d,{className:"px-3 py-2 mx-1 rounded bg-red-300 text-white font-bold",children:s},s));for(let t=s+1;t<=Math.min(n,s+3);t++)r.push(e.jsx(d,{className:"px-3 py-2 mx-1 rounded bg-red-500 text-white hover:bg-red-700",onClick:()=>i(t),children:t},t));return r.push(e.jsx(d,{className:"px-3 py-2 mx-1 rounded bg-red-500 text-white hover:bg-red-700 font-bold",onClick:()=>i(n),children:">|"},"last")),e.jsx("div",{className:"sticky bottom-0 w-full flex justify-center p-4 rounded-xl shadow-md",children:e.jsx("div",{className:"flex",children:r})},"pagination")},w=()=>{const[s,n]=o.useState([]),[i,r]=o.useState(!0),[t,m]=o.useState(1),[h,f]=o.useState(1),[x,b]=o.useState(""),[k,S]=o.useState(!1),p=async()=>{r(!0);try{const a=await g.post("/trucs/gettrucks",{page:t,plate_number:x});a.data&&a.data.status&&Array.isArray(a.data.data)&&(n(a.data.data),typeof a.data.last_page=="number"&&f(a.data.last_page))}catch(a){console.error("Error fetching trucks:",a)}finally{r(!1)}};o.useEffect(()=>{p()},[t]);const j=a=>{m(a)};return i?e.jsx("div",{children:"Загрузка..."}):e.jsxs("div",{children:[e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",value:x,onChange:a=>b(a.target.value),placeholder:"Поиск по номеру",className:"border p-2 rounded w-full max-w-sm",onKeyDown:a=>{a.key==="Enter"&&p()}})}),s.length===0?e.jsx("div",{children:"Грузовики не найдены."}):null,e.jsxs("div",{className:"grid auto-rows-min gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:[s.map(a=>e.jsx(u,{truck:a},a.id)),e.jsx("div",{className:"col-span-full flex justify-center mt-4",children:e.jsx(_,{currentPage:t,lastPage:h,setPage:j})})]})]})},N=[{title:"Грузовики",href:"/trucks"}];function B(){return e.jsxs(y,{breadcrumbs:N,children:[e.jsx(v,{title:"Грузовики"}),e.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4",children:e.jsx(w,{})})]})}export{B as default};
